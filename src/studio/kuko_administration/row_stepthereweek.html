<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/commer.css" />
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<title>kuko排课管理</title>
</head>

<body>
	<div class="main">     
        <div class="content clearfix">
        	<div class="w_left">
            	<div class="lift">
                	<h3><a href="javascript:;"><img src="images/index/user.png" width="79" height="79" /></a></h3>
                	<ul>
                    	<li><a class="home" href="index.html">首页</a></li>
                        <li><a class="xun" href="xuntang.html">我要巡堂</a></li>
                        <li><a class="culum" href="curriculum.html">课程管理</a></li>
                        <li><a class="teach" href="teacher.html">教师管理</a></li>
                        <li><a class="ban" href="class_stepfirst.html">班级管理</a></li>
                        <li class="selected"><a class="timetable" href="">排课管理</a></li>
                        <li><a class="analysis" href="analysis.html">教学分析</a></li>
                        <li><a class="member" href="u_membercenter.html">个人中心(<span>4</span>)</a></li>
                        <li><a class="help" href="javascript:;">使用帮助</a></li>
                    </ul>
                    <h4><a href="javascript:;"><img src="images/index/feedback.png" width="156" height="70" /></a></h4>
                </div>
            </div>
            <div class="w_right">
            	<div class="all">
                	<div class="course clearfix">
                		<h2>排课管理</h2> 
                        <span>对各个班级的课表进行安排。</span> 
                    </div>
                   	<div class="class_step">
                    	<img src="images/jiaowu/row_step3.png" width="773" height="38" />
                    </div>
                    <div class="rowThere">
                    	<div class="banji">
                        	高三年级一班、高三年级二班、高三年级三班、高三年级四班、高三年级五班、高三年级六班、高二年级一班、高二年级二班排课表
                        </div>
                        <div class="kemu" id="courseMenu" style="position:relative;">
                        	<span>语文</span>
                            <span>数学</span>
                            <span>英语</span>
                            <span>政治</span>
                            <span>历史</span>
                            <span>地理</span>
                            <span>物理</span>
                            <span>化学</span>
                            <span>生物</span>
                        </div>
                        <div class="week_main_hisotoy">
                            <div class="there_hisotoy" id="addCourse">
                                <h5 class="pre">
                                    <a class="btn" href="javascript:;"><img src="images/index/pre.png" /></a>
                                    <p>上午</p>
                                    <p>下午</p>
                                    <p>晚上</p>
                                </h5>
                                <ul class="clearfix">
                                    <li>
                                        <dt>周一[2014-11-26]</dt>
                                        <dl>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl>
                                            <dd>
                                            	<a href="javascript:;"><input type="text" /><i>×</i></a>
                                                <!--<div class="xianshi">
                                                    <ul class="clearfix">
                                                        <li><a href="javascript:;">语文</a></li>
                                                        <li><a href="javascript:;">数学</a></li>
                                                        <li><a href="javascript:;">英语</a></li>
                                                        <li><a href="javascript:;">政治</a></li>
                                                        <li><a href="javascript:;">历史</a></li>
                                                        <li><a href="javascript:;">地理</a></li>
                                                        <li><a href="javascript:;">物理</a></li>
                                                        <li><a href="javascript:;">化学</a></li>
                                                        <li><a href="javascript:;">生物</a></li>
                                                    </ul>
                                                </div>-->
                                            </dd>
                                            <dd>
                                            	<a href="javascript:;"><input type="text" /><i>×</i></a>
                                            </dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            
                                        </dl>
                                        <dl>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周二[2014-11-27]</dt>
                                        <dl>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>  
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周三[2014-11-28]</dt>
                                        <dl>
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd> 
                                        </dl>
                                        <dl>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd> 
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周四[2014-11-29]</dt>
                                        <dl>
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl>   
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周五[2014-11-30]</dt>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周六[2014-11-31]</dt>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl>
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                    <li>
                                        <dt>周日[2014-12-01]</dt>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl> 
                                        	<dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                        <dl>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                            <dd><a href="javascript:;"><input type="text" /><i>×</i></a></dd>
                                        </dl>
                                    </li>
                                </ul>
                                <h5 class="next"><a class="btn" href="javascript:;"><img src="images/index/next.png" /></a></h5>
                            </div>
                        </div>
                        <div class="rowthere_btn">
                        	<a class="rowfirst_next" href="row_stepsecond.html">上一步</a>
                            <a class="rowfirst_next" href="row_stepfourday.html">下一步</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
	var top = $("#div1").offset().top;
var left = $("#div1").offset().left;
//添加排课
$('#addCourse').delegate('input','click',function(e){
    var template =  '<div class="xianshi"><ul class="clearfix">'+
                        '<li><a href="javascript:;">语文</a></li>'+
                        '<li><a href="javascript:;">数学</a></li>'+
                        '<li><a href="javascript:;">英语</a></li>'+
                        '<li><a href="javascript:;">政治</a></li>'+
                        '<li><a href="javascript:;">历史</a></li>'+
                        '<li><a href="javascript:;">地理</a></li>'+
                        '<li><a href="javascript:;">物理</a></li>'+
                        '<li><a href="javascript:;">化学</a></li>'+
                        '<li><a href="javascript:;">生物</a></li>'+
                    '</ul></div>';//console.log($('#addCourse').find('div.xianshi').length);
    var elemParent=$(this).parents('dd'),offset=$(this).offset();
	
    if($('#addCourse').find('div.xianshi').length>=1){
       $('#addCourse').find('div.xianshi').remove();
    };
    elemParent.append(template);console.log(offset.top+'---'+offset.left);
	if(offset.top>377){
        $('div.xianshi').css('top','-135px');
    };
    if(offset.left>1300){
        $('div.xianshi').css('left','-118px');
    };
    e.stopPropagation();
});
$('#addCourse').delegate('div.xianshi a','click',function(){
	
    var txt = $(this).text(),elemParent=$(this).parents('dd');
    elemParent.find('input').val(txt);
    if(elemParent.find('input').val() != ''){
        elemParent.find('i').show();
    }else{
       elemParent.find('i').hide(); 
    }
    $(this).parents('div.xianshi').remove();
});

$('#addCourse').delegate('dd a i','click',function(){
    $(this).prev().val('');
    $(this).hide();
});
//拖拽
$(function(){
    $('#courseMenu span').Drag({drop:'#addCourse dd,#courseMenu'});
});
$.fn.Drag=function (options) {
    var defaults={
        limit : window,
        drop:false,
        handle:false,
        finish:function () {}
    };
    var options=$.extend(defaults,options);
    this.X=0;this.Y=0;this.dx=0;this.dy=0;
    var This=this,ThisO=$(this),thatO;
    if (options.drop) {
        var ThatO=$(options.drop);
        ThisO.css({cursor:'move'});
        var tempBox=$('<div id="tempBox" class="grid"></div>');
    }else {
        options.handle ? ThisO.find(options.handle).css({cursor:'move','-moz-user-select':'none'}) : ThisO.css({cursor:'move','-moz-user-select':'none'});
    }
    //拖动开始
    this.dragStart=function (e) {
        var cX=e.pageX,cY=e.pageY;
        if (options.drop) {
            ThisO=$(this);
            if (ThisO.length!=1) {return}
            This.X=ThisO.offset().left;
            This.Y=ThisO.offset().top;
            tempBox.html(ThisO.html());
            $('body').append(tempBox);
            tempBox.css({left:This.X,top:This.Y});
        }else {
            This.X=ThisO.offset().left;
            This.Y=ThisO.offset().top;
            ThisO.css({margin:0})
        }
        This.dx=cX-This.X;
        This.dy=cY-This.Y;
        if (!options.drop) {ThisO.css({position:'absolute',left:This.X,top:This.Y})}
        $(document).mousemove(This.dragMove);
        $(document).mouseup(This.dragStop);
    }
    //拖动中
    this.dragMove=function (e) {
        var cX=e.pageX;
        var cY=e.pageY;
        if (options.limit) {
            //容器的尺寸
            var L=$(options.limit)[0].offsetLeft ? $(options.limit).offset().left : 0;
            var T=$(options.limit)[0].offsetTop ? $(options.limit).offset().top : 0;
            var R=L+$(options.limit).width();
            var B=T+$(options.limit).height();
            //获取拖动范围
            var iLeft=cX-This.dx, iTop=cY-This.dy;
            //获取超出长度
            var iRight=iLeft+parseInt(ThisO.innerWidth())-R, iBottom=iTop+parseInt(ThisO.innerHeight())-B;
            //先设置右下, 再设置左上
            if(iRight > 0) iLeft -= iRight;
                
            if(iBottom > 0) iTop -= iBottom;
            if(L > iLeft) iLeft = L;
            if(T > iTop) iTop = T;
            if (options.drop) {
                tempBox.css({left:iLeft,top:iTop})
            }else {
                ThisO.css({left : iLeft,top : iTop})
            }
        }else {
            //不限制范围
            if (options.drop) {
                tempBox.css({left:cX-This.dx,top:cY-This.dy})
            }else {
                ThisO.css({left:cX-This.dx,top:cY-This.dy});
            }
        }
        
    }
    //拖动结束
    this.dragStop=function (e) {
        if (options.drop) {
            var flag=false;
            var cX=e.pageX;
            var cY=e.pageY;
            var oLf=ThisO.offset().left;
            
            var oRt=oLf+ThisO.width();
            var oTp=ThisO.offset().top;
            var oBt=oTp+ThisO.height();
            if (!(cX>oLf && cX<oRt && cY>oTp && cY<oBt)) {//如果不是在原位
                for (var i=0; i<ThatO.length; i++) {
                    var XL=$(ThatO[i]).offset().left;
                    var XR=XL+$(ThatO[i]).width();
                    var YL=$(ThatO[i]).offset().top;
                    var YR=YL+$(ThatO[i]).height();
                    if (XL<cX && cX<XR && YL<cY && cY<YR) {//找到拖放目标 交换位置
                        $(ThatO[i]).find('input').val(tempBox.html());
                        $(ThatO[i]).find('i').show();
                        thatO=$(ThatO[i]);
                        tempBox.remove();
                        flag=true;
                        break;//一旦找到 就终止循环
                    }
                }
            }
            if (!flag) {//如果找不到拖放位置,归回原位
                tempBox.css({left:This.X,top:This.Y});
                tempBox.remove();
            }
        }
        $(document).unbind('mousemove');
        $(document).unbind('mouseup');
        options.finish(e,ThisO,thatO);
    }
    //绑定拖动
    options.handle ? ThisO.find(options.handle).mousedown(This.dragStart) : ThisO.mousedown(This.dragStart);
    
    //IE禁止选中文本
    document.body.onselectstart=function(){return false;}
};

	//checkbox默认勾选
	function check()
	  {
	  document.getElementById("check1").checked=true
	  }
	function uncheck()
	  {
	document.getElementById("check1").checked=false
	  }
	//hover事件
	$(function(){
	$(".clsTitle").hover(function(){
	$(".clsContent").show();
	},
	function(){
	$(".clsContent").hide();
	})
	}) 
	$(function(){
	$(".clsTitle1").hover(function(){
	$(".clsContent1").show();
	},
	function(){
	$(".clsContent1").hide();
	})
	}) 
</script>
</body>
</html>
